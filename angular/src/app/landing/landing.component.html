<style id="antiClickjack">
  body {
    display: none !important;
  }
</style>
<script type="text/javascript">
  if (self === top) {
    var antiClickjack = document.getElementById("antiClickjack");
    if (antiClickjack !== null && antiClickjack !== undefined)
      antiClickjack.parentNode.removeChild(antiClickjack);

  } else {
    top.location = self.location;
  }
</script>
<div [@changeMode]=currentMode style="background-color: #153971;color: #FFFFFF;height: 3em;">
  <button *ngIf="isAuthenticated" type="button" (click)="setRecordEditmode(false)" pButton type="submit"
    style="float:right;margin:.5em 1em .5em 0em;width:150px; height:2em; background-color:grey;color:white;padding-right: 1em;"
    [disabled]="!recordEditmode || titleObj.detailEditmode">
    <i class="faa faa-trash faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
    Cancel
  </button>
  <button *ngIf="isAuthenticated" type="button" (click)="saveRecord()" pButton type="submit"
    style="float:right;margin:.5em 1em .5em 0em;width:150px; height:2em; background-color:green;color:white;padding-right: 1em;"
    [disabled]="!recordEditmode || titleObj.detailEditmode">
    <i class="faa faa-save faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
    Save
  </button>
  <button *ngIf="isAuthenticated" type="button" (click)="setRecordEditmode(true)" pButton type="submit"
    style="float:right;margin:.5em 1em .5em 1em;width:150px; height:2em; background-color:green;color:white;padding-right: 1em;"
    [disabled]="recordEditmode">
    <i class="faa faa-pencil faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
    Edit
  </button>
</div>
<div class="ui-grid ui-grid-responsive ui-grid-pad center">
  <div class="card landingcard">
    <!-- <div id="overlay" *ngIf="isLocalProcessing"> -->
    <div class="loading" *ngIf="isLocalProcessing"></div>
    <!-- </div> -->
    <div *ngIf="record?.length == 0 || isId === false">
      <div *ngIf="!isLoading" class="ui-g">
        <div class="ui-g-10 ui-md-10 ui-lg-10 ui-sm-12" style="padding-left: 1%">
          <b>No Landing page available</b>
          <p>{{errorMsg}}</p>
        </div>
      </div>
    </div>
    <div *ngIf="record.length !== 0 && isId === true">
      <div class="ui-g">
        <div class="ui-g-10 ui-md-10 ui-lg-10 ui-sm-12">
          <div class="ui-g">
            <div class="ui-g-12 ui-md-12 ui-lg-12 ui-sm-12">
              <span class="recordType" [ngSwitch]="record['@type'][0]">
                <b *ngSwitchCase="'nrd:SRD'">Standard Reference Data</b>
                <b *ngSwitchCase="'nrdp:DataPublication'">Data Publication</b>
                <b *ngSwitchCase="'nrdp:PublicDataResource'">Public Data Resource</b>
                <b *ngSwitchDefault></b>
              </span>
              <div *ngIf="record.length !== 0" class="ui-sm-1 d-none d-sm-block d-md-none ">
                <button style="float: right" type="button" pButton icon="faa faa-list"
                  class="ui-button ui-button-icon-only" (click)="menu3.toggle($event)"></button>
                <p-menu #menu3 class="rightMenuStylePop" popup="popup" [model]="rightmenu"></p-menu>
              </div>
              <br>
              <div *ngIf="!recordEditmode">
                <span class="title" style="text-align: left; vertical-align: top;">
                  <h2>{{record.title}}</h2>
                </span>
              </div>
              <div *ngIf="recordEditmode">
                <div style="text-align: left; vertical-align: top;">
                  <span class="title" style="display: inline-block;vertical-align: top;max-width:calc(100% - 5.5em);">
                    <h2 [@changeBorderColor]=titleObj.currentState *ngIf="!titleObj.detailEditmode"
                      style="display: inline-block;padding-right: .5em;" contenteditable="false" (click)="editTitle()">
                      {{record.title}}</h2>
                    <h2 *ngIf="titleObj.detailEditmode" style="display: inline-block;"
                      [style.border]="titleObj.borderStyle" #topicTitle contenteditable="true"
                      [textContent]="record.title" (input)="record.title=topicTitle.innerText" (click)="editTitle()">
                    </h2>
                  </span>
                  <span style="display: inline-block;vertical-align: top;">
                    <button class="edit_button" [@changeOpacity]=titleObj.currentState *ngIf="!titleObj.detailEditmode"
                      [style.opacity]="titleObj.buttonOpacity" type="button" (click)="editTitle()">
                      <i class="faa faa-pencil" style="cursor: pointer;color:grey; margin-top: 0em;"
                        data-toggle="tooltip" title="Edit title"></i>
                    </button>
                    <div *ngIf="titleObj.detailEditmode" class="two_button_container">
                      <button [style.opacity]="titleObj.buttonOpacity" type="button" (click)="saveEditedTitle()"
                        class="two_buttons">
                        <i class="faa faa-check" style="cursor: pointer;color:grey; margin-top: 0em;"
                          data-toggle="tooltip" title="Save edited title"></i>
                      </button>
                      <button [style.opacity]="titleObj.buttonOpacity" type="button" (click)="cancelEditedTitle()"
                        class="two_buttons">
                        <i class="faa faa-close" style="cursor: pointer;color:grey; margin-top: 0em;"
                          data-toggle="tooltip" title="Cancel edited title"></i>
                      </button>
                    </div>
                  </span>
                </div>
              </div>
              <div *ngIf="!record.authors; else hasAuthors">
                <div [@changeBorderColor]=authorObj.currentState *ngIf="recordEditmode"
                  style="text-align: left; vertical-align: top;display: inline-block;padding-right: .5em;">
                  Authors:
                </div>
                <button [@changeOpacity]=authorObj.currentState *ngIf="recordEditmode && !authorObj.detailEditmode"
                  [style.opacity]="authorObj.buttonOpacity" type="button" (click)="openAuthorModal()"
                  class="edit_button2">
                  <i class="faa faa-pencil" style="cursor: pointer;color:grey; margin-top: 0em;" data-toggle="tooltip"
                    title="Edit contact"></i>
                </button>
              </div>
              <ng-template #hasAuthors>
                <div style="display: inline-block;width:100%;text-align: left; vertical-align: top;">
                  <div [@changeBorderColor]=authorObj.currentState
                    style="display: inline-block; padding-right: .5em; text-align: left; vertical-align: top;max-width:calc(100% - 4em);">
                    <div *ngIf="record.authors">
                      <span *ngFor="let author of record.authors; let i = index">
                        {{ author.fn }}<span *ngIf="i < record.authors.length-1 ">,</span>
                      </span>
                      <i style="cursor: pointer; margin-left: 0.5rem;" class="faa"
                        [ngClass]="{'faa-plus-square-o': !clickAuthors, 'faa-minus-square-o': clickAuthors}"
                        aria-hidden="true"
                        (click)="isCollapsedContent = !isCollapsedContent; clickAuthors = expandClick();"></i>
                    </div>
                    <div [collapse]="!isCollapsedContent" class="card card-block card-header customcard">
                      <div class="" *ngIf="record.authors">
                        <span><b>Authors:</b></span>
                        <div *ngFor="let author of record.authors; let i = index">
                          <span>{{ author.fn}}</span>,
                          <span *ngFor="let aff of author.affiliation">
                            <br>{{aff.title}}
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button [@changeOpacity]=authorObj.currentState *ngIf="recordEditmode && !authorObj.detailEditmode"
                    [style.opacity]="authorObj.buttonOpacity" type="button" (click)="openAuthorModal()"
                    class="edit_button2">
                    <i class="faa faa-pencil" style="cursor: pointer;color:grey; margin-top: 0em;" data-toggle="tooltip"
                      title="Edit contact"></i>
                  </button>
                </div>
              </ng-template>
            </div>
          </div>
          <div class="ui-g">
            <div class="ui-g-8 ui-md-8 ui-lg-8 ui-sm-12 contactPoint">
              <div *ngIf="!record.contactPoint; else hasContacts">
                <div [@changeBorderColor]=contactObj.currentState *ngIf="recordEditmode"
                  style="text-align: left; vertical-align: top;display: inline-block;padding-right: .5em;">
                  Contact:
                </div>
                <button [@changeOpacity]=contactObj.currentState *ngIf="recordEditmode && !contactObj.detailEditmode"
                  [style.opacity]="contactObj.buttonOpacity" type="button"
                  (click)="openContactModal('Contact-popup-dialog')" class="edit_button2">
                  <i class="faa faa-pencil" style="cursor: pointer;color:grey; margin-top: 0em;" data-toggle="tooltip"
                    title="Edit contact"></i>
                </button>
              </div>
              <ng-template #hasContacts>
                <div style="text-align: left; vertical-align: top;" *ngIf="record.contactPoint">
                  <div [@changeBorderColor]=contactObj.currentState style="display: inline-block; padding-right: .5em">
                    Contact:
                    <strong>
                      <a class="font14" *ngIf="isEmail" href="{{record.contactPoint.hasEmail}}" target="_top">
                        {{record.contactPoint.fn}}</a>
                      <span *ngIf="!isEmail">{{record.contactPoint.fn}}</span>
                    </strong>..
                    <i style="cursor: pointer;" class="faa"
                      [ngClass]="{'faa-plus-square-o': !clickContact, 'faa-minus-square-o': clickContact}"
                      aria-hidden="true" (click)="closeContent = !closeContent; clickContact=expandContact();"></i>
                    <div [collapse]="!closeContent" class="card card-body bg-faded">
                      <span class="" *ngIf="record.contactPoint.fn">
                        <span>{{record.contactPoint.fn}}</span>
                      </span>
                      <span class="font14" *ngIf="isEmail">
                        <br><strong>Email:</strong>
                        <a *ngIf="isEmail" href="{{record.contactPoint.hasEmail}}" target="_top">
                          {{record.contactPoint.hasEmail.split(":")[1]}}</a>
                      </span>
                      <div class="font14" *ngIf="record.contactPoint.address">
                        <span><b>Address:</b></span>
                        <div *ngFor="let address of record.contactPoint.address">
                          {{address}}
                        </div>
                      </div>
                    </div>
                  </div>
                  <button [@changeOpacity]=contactObj.currentState *ngIf="recordEditmode && !contactObj.detailEditmode"
                    [style.opacity]="contactObj.buttonOpacity" type="button"
                    (click)="openContactModal('Contact-popup-dialog')" class="edit_button2">
                    <i class="faa faa-pencil" style="cursor: pointer;color:grey; margin-top: 0em;" data-toggle="tooltip"
                      title="Edit contact"></i>
                  </button>
                </div>
              </ng-template>
              <!-- <br> -->
              <span *ngIf="isId">Identifier: </span>
              <span *ngIf="isDOI"><i> <a class="font14"
                    href="https://doi.org/{{record.doi.split(':')[1]}}">{{record.doi}}</a></i></span>
              <span *ngIf="!isDOI"><i> <a class="font14"
                    href="{{ confValues.PDRAPI }}{{record['@id']}}">{{record["@id"]}}</a></i>
              </span>
              <span *ngIf="checkReferences()"><br>
                <span>Described in article: </span>
                <small *ngFor="let refs of record['references']; let i =index">
                  <span style="padding-left:2.75em" *ngIf="refs.refType == 'IsDocumentedBy'">
                    <br><i class="faa faa-external-link">
                      <a class="font14" href={{refs.location}} target="blank">{{ refs.label }}</a></i>
                    <span *ngIf="i < record.references.length-1 ">,</span>
                  </span>
                </small>
              </span><br>
              <span class="" *ngIf="record.version"> Version: <strong>{{record.version}}</strong></span>
              <span class="" *ngIf="record.versionHistory" style="padding-right: 15pt;">...
                <i style="cursor: pointer;" class="faa" aria-hidden="true"
                  [ngClass]="{'faa-plus-square-o': !clickHistory, 'faa-minus-square-o': clickHistory}"
                  (click)="closeHistory = !closeHistory; clickHistory = expandHistory();"></i>
              </span>
              <span class="" *ngIf="record.issued" style="padding-right: 10pt;"> Released:
                <strong>{{record.issued}}</strong></span>
              <span class="" *ngIf="record.modified" style="padding-right: 10pt;"> Last modified:
                <strong>{{record.modified}}</strong></span>
              <div class="card customcard" [collapse]="!closeHistory">
                <b>Version History:</b>
                <span *ngFor="let release of record.versionHistory">
                  <br> <b [innerHTML]="renderRelVer(release, record.version)"></b> &nbsp;&nbsp;
                  <span *ngIf="release.issued">Released: {{release.issued}}</span>
                  <span *ngIf="release.location || release.refid"> &nbsp;&nbsp;
                    <i [innerHTML]="renderRelId(release, record.version)"></i>
                  </span>
                  <span *ngIf="release.description"> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <i>{{release.description}}</i>
                  </span>
                </span>
              </div>
              <p style="margin-top: 10px;" *ngIf="newer.location">
                <b>There is a more recent release of this resource available: &nbsp;&nbsp;
                  <a href="{{newer.location}}">{{newer.label}}</a></b>
              </p>
            </div>


            <div class="ui-g-4 ui-md-4 ui-lg-4 ui-sm-12">
              <span *ngIf="record.landingPage">
                <a [(href)]="record.landingPage" target="_blank" style="float: right;">
                  <button pButton type="button" class="homePageLink" icon="faa faa-external-link"
                    label="Visit Home Page"></button>
                </a>
              </span>
            </div>
          </div>
          <div class="ui-g">
            <div class="ui-g-12 ui-md-12 ui-lg-12 ui-sm-12">
              <description-resources [record]="record" [files]="files" [distdownload]="distdownload"
                [isInternal]="isInternal" [filescount]="filescount" [metadata]="metadata"
                [recordEditmode]="recordEditmode"></description-resources>
              <metadata-detail [record]="record" [serviceApi]="serviceApi" [metadata]="metadata"></metadata-detail>
              <!-- <data-cart></data-cart>   -->
            </div>
            <div *ngIf="record.length !== 0">
              <p-dialog class="citationDialog" [closable]="false" [(visible)]="display" modal="modal" width="550"
                height="330" responsive="true" #citeDialog>
                <p-header> Citation
                  <button style="position:relative; float:right; background-color:#1E6BA1; " type="button" pButton
                    icon="faa faa-close" (click)="closeDialog()"></button>
                </p-header>
                <span><b>Copy the recommended text to cite this resource </b></span> <br><br>
                <p contenteditable="false" style="font-size: 14px;">{{ citeString }}</p>
                <br>
                <a target="citationsRecommendation"
                  href="https://www.nist.gov/director/copyright-fair-use-and-licensing-statements-srd-data-and-software#citations">See
                  also NIST Citation Recommendations</a>
              </p-dialog>
            </div>

            <div class="ui-g">
              <!-- <p-dialog [closable]="false" [style]="{'position':'absolute'}" [(visible)]="displayDatacart" modal="modal" responsive="true" #datacartDialog>
                <p-header> Datacart
                </p-header>
                <data-cart></data-cart>
                <p-footer>
                  <button type="button" pButton (click)="displayDatacart=false" style="background-color:darkgreen;color:white;width:30%;padding-top:.4em;">
                    Exit
                  </button>
                </p-footer>
              </p-dialog> -->

            </div>
          </div>
        </div>

        <div class="ui-g-2 ui-md-2 ui-lg-2 ui-sm-12">
          <div class="ui-g" style="position:sticky; top:0; ">
            <div class="ui-g-12 ui-md-12 ui-lg-12 ui-sm-12">
              <div class="d-none d-md-block d-lg-block d-xl-block ">
                <p-menu class="rightMenuStyle" [model]="rightmenu"></p-menu>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<modal id="Contact-popup-dialog">
  <div class="modal-forground">
    <div class="modal-body">
      <div style="background-color:#153971;height: 4em; color:white;text-align: center;padding-top: .5em">
        <h2 style="color: white;">Contact</h2>
      </div>
      <div style="margin: 1em 2em 2em 2em;">
        <p>
          Contact full name: <input type="text" [(ngModel)]="tempContactPoint.fn" />
        </p>
        <p>
          Email: <input type="text" [(ngModel)]="tempContactPoint.hasEmail" />
        </p>
        Address:
        <div>
          <textarea id="address" style="width: 100%; padding: .5em .5em .5em 1.5em; border: 1px solid lightgrey;"
            (keyup)="autogrow($event)" [(ngModel)]='tempAddress'
            placeholder="Organization&#x0a;Street address&#x0a;city, state zip"></textarea>
        </div>
        <div style="align-items: right; margin-top: 1em;">
          <button pButton class="button"
            style="float:right;margin:0em 1em 2em 1em;width:150px; height:2em; background-color:grey;color:white;padding-right: 1em;"
            (click)="closeModal('Contact-popup-dialog');">
            <i class="faa faa-trash faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
            Cancel
          </button>
          <button pButton class="button"
            style="float:right;margin:0em 1em 2em 1em;width:150px; height:2em; background-color:green;color:white;padding-right: 1em;"
            (click)="saveContactInfo();">
            <i class="faa faa-save faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
            Save
          </button>
        </div>
        <div style="clear:both"></div>
      </div>
    </div>
  </div>
  <div class="modal-background"></div>
</modal>
<modal id="Author-popup-dialog">
  <div class="modal-forground">
    <div class="modal-body">
      <div
        style="width:100%; vertical-align: bottom;background-color:#153971;height: 4em; color:white;text-align: center;padding-top: .5em; ">
        <div style="display: inline-block; width: 90%; height: 100%; overflow: hidden; margin: auto;">
          <h2 style="display:inline-block; color: white;">Authors</h2>
          <i [ngClass]="getAuthorClass()" (click)="handleAuthorDisplay()" style="cursor:pointer;margin-left: .5em;"
            data-toggle="tooltip" title="Expend/collapse author details"></i>
          <div style="float: right; margin-right:.5em; margin-top: 1.5em;">
            <i class="faa faa-user-plus faa-1x" (click)="addAuthor()" style="cursor:pointer; color: white;"
              data-toggle="tooltip" title="Add author"></i>
          </div>
        </div>
      </div>
      <!-- <div style="overflow:hidden; width: 100%; height: 3em;"> -->
      <div style="width: 90%; margin-left: 1em; margin-right: 1em;">
        <div style="display: table;margin: 0.5em auto;width:fit-content;">
          <span *ngFor="let author of tempAuthors.authors; let i = index">
            {{ author.fn }}<span *ngIf="i < tempAuthors.authors.length-1 ">,</span>
          </span>
        </div>
      </div>
      <hr>
      <div style="overflow:hidden; width: 90%; margin: .5em auto 0em auto;">
        <button pButton class="button"
          style="float:right;width:150px; height:2em; background-color:grey;color:white;padding-right: 1em;"
          (click)="closeModal('Author-popup-dialog');">
          <i class="faa faa-trash faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
          Cancel
        </button>
        <button pButton class="button"
          style="float:right;margin-right: 1em;width:150px; height:2em; background-color:green;color:white;margin-right: 1em;padding-right: 1em;"
          (click)="saveAuthorInfo();">
          <i class="faa faa-save faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
          Save
        </button>
      </div>
      <!-- </div> -->
      <div style="text-align: center; width:100%;margin: 1em 0em 1em 0em;">
        <div *ngFor="let author of tempAuthors.authors; let i = index; trackBy: trackByFn"
          style="width: 100%;margin-bottom: .5em;">
          <table width="90%" align="center">
            <tr style="text-align: center;" [style.background-color]="getHeaderBackgroundColor(author)"
              [style.color]="getHeaderForegroundColor(author)">
              <td colspan="2">
                {{author.fn}}
                <i [ngClass]="getTitleClass(author)" (click)="author.isCollapsed = !author.isCollapsed"
                  style="cursor:pointer;" data-toggle="tooltip" title="Show/hide author details"></i>
                <i class="faa faa-trash" (click)="deleteAuthor(author)"
                  style="float:right; cursor:pointer; margin: .2em .5em 0em 0em" data-toggle="tooltip"
                  title="Remove this author"></i>
                <i class="faa faa-undo" (click)="resetAuthor(author, i);"
                  style="float:right; cursor:pointer; margin: .2em .5em 0em 0em" data-toggle="tooltip"
                  title="Discard changes"></i>
                <img *ngIf="i > 0" src="assets/images/arrow-alt-from-bottom.svg" (click)="moveAuthorUp(author, i)"
                  style="float:left; width:.8em; cursor:pointer; margin: .2em 0em 0em .5em" data-toggle="tooltip"
                  title="Move author up" [ngClass]="getTitleImgClass(author)">
                <img *ngIf="i < tempAuthors.authors.length-1" src="assets/images/arrow-alt-from-top.svg"
                  (click)="moveAuthorDown(author, i)"
                  style="float:left; width:.8em; cursor:pointer; margin: .2em 0em 0em .5em" data-toggle="tooltip"
                  title="Move author down" [ngClass]="getTitleImgClass(author)">
              </td>
            </tr>
            <tr *ngIf="!author.isCollapsed">
              <td align="right" data-toggle="tooltip" title="Required field" width="20%">
                <span style="margin-right: .5em;" data-toggle="tooltip" title="This field is required"><span style="color:red;">*</span> Given Name:</span>
              </td>
              <td>
                <input type="text" [(ngModel)]="author.givenName" style="height:2em;"
                  (input)="onGivenNameChange(author, $event.target.value)" />
              </td>
            </tr>
            <tr *ngIf="!author.isCollapsed">
              <td align="right">
                <span style="margin-right: .5em;">Middle Name:</span>
              </td>
              <td>
                <input type="text" [(ngModel)]="author.middleName" style="height:2em;"
                  (input)="onMiddleNameChange(author, $event.target.value)" />
              </td>
            </tr>
            <tr *ngIf="!author.isCollapsed" data-toggle="tooltip" title="Required field">
              <td align="right">
                <span style="margin-right: .5em;" data-toggle="tooltip" title="This field is required"><span style="color:red;">*</span> Family Name:</span>
              </td>
              <td>
                <input type="text" [(ngModel)]="author.familyName" style="height:2em;"
                  (input)="onFamilyNameChange(author, $event.target.value)" />
              </td>
            </tr>
            <tr *ngIf="!author.isCollapsed">
              <td width="15%" align="right">
                <span style="margin-right: .5em;" data-toggle="tooltip" title="This field is required"><span style="color:red;">*</span> Name (as displayed)</span>
              </td>
              <td align="left">
                <input type="text" [(ngModel)]="author.fn"
                  style="width: calc(100% - 2em);height:2em; margin-right: .5em;"
                  (input)="onFullNameChange(author, $event.target.value)" />
                <i *ngIf="!author.fnLocked" class="faa faa-unlock" (click)="author.fnLocked = !author.fnLocked"
                  style="cursor:pointer;" data-toggle="tooltip"
                  title="Prevent full name from updated automatically"></i>
                <i *ngIf="author.fnLocked" class="faa faa-lock" (click)="author.fnLocked = !author.fnLocked"
                  style="cursor:pointer;" data-toggle="tooltip" title="Allow full name been updated automatically"></i>
              </td>
            </tr>
            <tr *ngIf="!author.isCollapsed">
              <td align="right">
                <span style="margin-right: .5em;" data-toggle="tooltip" title="This field is recommended"><span style="color:green;">*</span> ORCID:</span>
              </td>
              <td>
                <input type="text" [(ngModel)]="author.orcid"
                  style="width: calc(100% - 2em);height:2em; margin-right: .5em;" />
                <a href="https://orcid.org" target="blank"><img src="assets/images/orcid-logo.png"
                    style="width: 20px;"></a>
              </td>
            </tr>
            <tr *ngIf="!author.isCollapsed">
              <td align="right" style="vertical-align: top;">
                <span style="margin-right: .5em;" data-toggle="tooltip" title="This field is recommended"><span style="color:green;">*</span> Affiliations:</span>
                <span class="faa-stack" (click)="addAffiliation(i);" data-toggle="tooltip" title="Add affiliation">
                  <i class="faa faa-circle faa-stack-2x" style="color:green;"></i>
                  <i class="faa faa-plus faa-stack-1x faa-inverse"></i>
                </span>
              </td>
              <td style="border: 1px solid lightgrey;">
                <div *ngFor="let aff of author.affiliation; let j = index; trackBy: trackByFn"
                  style="width:100%; margin: 0em 0em .5em 0em;">
                  <div style="overflow:hidden; width: 100%; background-color: rgb(248, 246, 237)">
                    <div style="float: left; width: 95%; margin-left: .5em;">
                      <table>
                        <tr>
                          <td width="10%" align="right">Organization Name:</td>
                          <td>
                            <!-- <input type="text" [(ngModel)]="author.affiliation[j].title"
                              style="width: 100%;height:2em;" /> -->
                              <combo-box [dataList]="organizationList" [columnName]="'Organization'" [(taxonomy)]="author.affiliation[j].title"></combo-box>
                          </td>
                        </tr>
                        <tr>
                          <td width="10%" align="right" valign="center">Department/Division:</td>
                          <td><input type="text" [(ngModel)]="author.affiliation[j].dept"
                              style="width: 100%;height:2em;" />
                          </td>
                        </tr>
                      </table>
                    </div>
                    <i class="faa faa-trash" (click)="deleteAffiliation(i, aff)"
                      style="float: right;cursor: pointer;color:grey; margin: 1em .5em;" data-toggle="tooltip"
                      title="Delete affiliation"></i>
                  </div>
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <hr>
      <!-- <div style="overflow:hidden; width: 100%; height: 3em; background-color: rgb(0, 129, 180)"> -->
      <div style="overflow:hidden; width: 90%; margin: 1em auto 1em auto;">
        <button pButton class="button"
          style="float:right;margin:0em 1em 2em 1em;width:150px; height:2em; background-color:grey;color:white;padding-right: 1em;"
          (click)="closeModal('Author-popup-dialog');">
          <i class="faa faa-trash faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
          Cancel
        </button>
        <button pButton class="button"
          style="float:right;margin:0em 1em 2em 1em;width:150px; height:2em; background-color:green;color:white;padding-right: 1em;"
          (click)="saveAuthorInfo();">
          <i class="faa faa-save faa-1x icon-white" style="color: #fff;padding-left: .5em;padding-right: .5em;"></i>
          Save
        </button>
      </div>
    </div>
    <div style="clear:both"></div>

    <!-- </div> -->
  </div>
  <div class="modal-background"></div>
</modal>